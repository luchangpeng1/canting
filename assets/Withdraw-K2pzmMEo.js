import{_ as se,g as m,h as F,Y as U,k as p,n as l,v as _,q as t,w as o,z as R,I as w,a1 as D,E,x as i,y as u,B as v,aL as N,aB as ie,aE as de,bf as ue,ab as re,J as ce,A as I,aT as me,C as pe,ax as _e}from"./index-CjeFGtzt.js";const ve={class:"withdraw-container"},fe={class:"balance-card"},be={class:"balance-info"},ye={class:"balance-amount"},ke={class:"today-income"},ge={class:"income-amount"},we={class:"withdraw-form"},Ne={class:"account-section"},Ve={class:"section-header"},he={class:"bind-account-actions"},Ce={key:0,class:"account-list"},Ae={class:"account-info"},xe=["src","alt"],Be={class:"account-detail"},qe={class:"bank-name"},Te={class:"account-number"},De={class:"withdraw-tips"},Ie={class:"withdraw-history"},Me={class:"history-header"},$e={key:1,class:"history-list"},Fe={class:"record-info"},Ue={class:"record-amount"},Re={class:"record-detail"},Ee={class:"record-account"},We={class:"record-time"},Ye={key:2,class:"wechat-bind-tip"},ze={class:"qrcode-container"},He={class:"qrcode-placeholder"},Le={class:"dialog-footer"},W="https://example.com/wechat-qr.png",Se={__name:"Withdraw",setup(Oe){const Y=pe(),V=m(1234.56),z=m(356.8),C=m(2),h=[{id:1,bank:"工商银行",accountNumber:"**** **** **** 8888",icon:"/icons/icbc.png",label:"工商银行 (8888)"},{id:2,bank:"支付宝",accountNumber:"138****8888",icon:"/icons/alipay.png",label:"支付宝 (8888)"}],c=F({amount:"",bankAccount:""}),H={amount:[{required:!0,message:"请输入提现金额"},{type:"number",message:"提现金额必须为数字"},{min:100,message:"最低提现金额为100元"},{max:5e4,message:"单笔提现上限为50000元"},{validator:(s,e,r)=>{e>V.value?r(new Error("提现金额不能大于余额")):r()}}],bankAccount:[{required:!0,message:"请选择提现账户"}]},L=U(()=>C.value>0&&V.value>=100),A=m(null),x=m(!1),S=()=>{c.amount=Math.min(V.value,5e4)},B=m([{id:1,amount:1e3,status:"success",bankInfo:"工商银行 (8888)",createTime:"2024-03-20 14:30:00"},{id:2,amount:2e3,status:"pending",bankInfo:"支付宝 (8888)",createTime:"2024-03-19 16:20:00"}]),O=s=>({success:"提现成功",pending:"处理中",failed:"提现失败"})[s]||s,P=s=>_e(s).format("YYYY-MM-DD HH:mm"),j=()=>{Y.push("/m/admin/withdraw/history")},J=async()=>{var s;if(A.value)try{await A.value.validate(),x.value=!0,await new Promise(e=>setTimeout(e,1e3)),E.success("提现申请已提交"),c.amount="",c.bankAccount="",C.value--,B.value.unshift({id:Date.now(),amount:c.amount,status:"pending",bankInfo:((s=h.find(e=>e.id===c.bankAccount))==null?void 0:s.label)||"",createTime:new Date().toISOString()})}catch(e){console.error("提现失败：",e)}finally{x.value=!1}},b=m(!1),d=m(""),q=m(!1),y=m(null),Q=[{code:"ICBC",name:"工商银行"},{code:"ABC",name:"农业银行"},{code:"BOC",name:"中国银行"},{code:"CCB",name:"建设银行"},{code:"CMB",name:"招商银行"}],n=F({bankName:"",holderName:"",accountNumber:"",alipayAccount:"",realName:""}),G={bankName:[{required:!0,message:"请选择开户银行"}],holderName:[{required:!0,message:"请输入持卡人姓名"}],accountNumber:[{required:!0,message:"请输入银行卡号"},{pattern:/^\d{16,19}$/,message:"请输入正确的银行卡号"}],alipayAccount:[{required:!0,message:"请输入支付宝账号"},{type:"email",message:"请输入正确的邮箱格式"}],realName:[{required:!0,message:"请输入真实姓名"}]},K=U(()=>({bank:"绑定银行卡",alipay:"绑定支付宝",wechat:"绑定微信"})[d.value]||"绑定账户"),T=s=>{d.value=s,b.value=!0,y.value&&y.value.resetFields()},X=async()=>{if(y.value)try{await y.value.validate(),q.value=!0,await new Promise(e=>setTimeout(e,1e3));const s={id:Date.now(),bank:d.value==="bank"?n.bankName:d.value==="alipay"?"支付宝":"微信",accountNumber:d.value==="bank"?`**** **** **** ${n.accountNumber.slice(-4)}`:n.alipayAccount||"",icon:`/icons/${d.value}.png`,label:`${d.value==="bank"?n.bankName:d.value==="alipay"?"支付宝":"微信"} (${n.accountNumber.slice(-4)})`};h.push(s),E.success("绑定成功"),b.value=!1}catch(s){console.error("绑定失败：",s)}finally{q.value=!1}};return(s,e)=>{const r=i("el-button"),k=i("el-input"),f=i("el-form-item"),g=i("el-icon"),Z=i("el-radio"),ee=i("el-radio-group"),M=i("el-empty"),$=i("el-form"),ae=i("el-option"),te=i("el-select"),le=i("el-alert"),oe=i("el-image"),ne=i("el-dialog");return u(),p("div",ve,[l("div",fe,[l("div",be,[e[12]||(e[12]=l("div",{class:"balance-title"},"当前余额",-1)),l("div",ye,"¥ "+_(V.value.toFixed(2)),1)]),l("div",ke,[e[13]||(e[13]=l("div",{class:"income-title"},"今日收入",-1)),l("div",ge,"¥ "+_(z.value.toFixed(2)),1)])]),l("div",we,[t($,{model:c,rules:H,ref_key:"formRef",ref:A,"label-position":"top"},{default:o(()=>[t(f,{prop:"amount",label:"提现金额"},{default:o(()=>[t(k,{modelValue:c.amount,"onUpdate:modelValue":e[0]||(e[0]=a=>c.amount=a),modelModifiers:{number:!0},type:"number",placeholder:"请输入提现金额"},{prefix:o(()=>e[14]||(e[14]=[v("¥")])),append:o(()=>[t(r,{type:"primary",link:"",onClick:S},{default:o(()=>e[15]||(e[15]=[v("全部提现")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l("div",Ne,[l("div",Ve,[e[19]||(e[19]=l("span",{class:"section-title"},"提现账户",-1)),l("div",he,[t(r,{type:"primary",link:"",onClick:e[1]||(e[1]=a=>T("alipay"))},{default:o(()=>[t(g,null,{default:o(()=>[t(N(ie))]),_:1}),e[16]||(e[16]=v(" 绑定支付宝 "))]),_:1}),t(r,{type:"success",link:"",onClick:e[2]||(e[2]=a=>T("wechat"))},{default:o(()=>[t(g,null,{default:o(()=>[t(N(de))]),_:1}),e[17]||(e[17]=v(" 绑定微信 "))]),_:1}),t(r,{type:"warning",link:"",onClick:e[3]||(e[3]=a=>T("bank"))},{default:o(()=>[t(g,null,{default:o(()=>[t(N(ue))]),_:1}),e[18]||(e[18]=v(" 绑定银行卡 "))]),_:1})])]),h.length>0?(u(),p("div",Ce,[t(ee,{modelValue:c.bankAccount,"onUpdate:modelValue":e[4]||(e[4]=a=>c.bankAccount=a),class:"account-radio-group"},{default:o(()=>[(u(),p(w,null,D(h,a=>t(Z,{key:a.id,value:a.id,class:"account-radio-item"},{default:o(()=>[l("div",Ae,[l("img",{src:a.icon,alt:a.bank,class:"bank-icon"},null,8,xe),l("div",Be,[l("span",qe,_(a.bank),1),l("span",Te,_(a.accountNumber),1)])])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])):(u(),R(M,{key:1,description:"暂无绑定账户","image-size":60,class:"no-account-tip"}))])]),_:1},8,["model"]),l("div",De,[e[23]||(e[23]=l("p",null,"提现说明：",-1)),l("ul",null,[e[20]||(e[20]=l("li",null,"最低提现金额：100元",-1)),e[21]||(e[21]=l("li",null,"提现到账时间：1-3个工作日",-1)),l("li",null,"每日提现次数上限：3次（今日剩余："+_(C.value)+"次）",1),e[22]||(e[22]=l("li",null,"单笔提现上限：50000元",-1))])]),t(r,{type:"primary",class:"withdraw-button",loading:x.value,disabled:!L.value,onClick:J},{default:o(()=>e[24]||(e[24]=[v(" 申请提现 ")])),_:1},8,["loading","disabled"])]),l("div",Ie,[l("div",Me,[e[26]||(e[26]=l("h3",null,"提现记录",-1)),t(r,{type:"primary",link:"",onClick:j},{default:o(()=>[e[25]||(e[25]=v(" 查看全部 ")),t(g,null,{default:o(()=>[t(N(re))]),_:1})]),_:1})]),B.value.length===0?(u(),R(M,{key:0,description:"暂无提现记录"})):(u(),p("div",$e,[(u(!0),p(w,null,D(B.value,a=>(u(),p("div",{key:a.id,class:"history-item"},[l("div",Fe,[l("div",Ue,"¥ "+_(a.amount.toFixed(2)),1),l("div",{class:ce(["record-status",a.status])},_(O(a.status)),3)]),l("div",Re,[l("div",Ee,_(a.bankInfo),1),l("div",We,_(P(a.createTime)),1)])]))),128))]))]),t(ne,{modelValue:b.value,"onUpdate:modelValue":e[11]||(e[11]=a=>b.value=a),title:K.value,width:"90%","show-close":!1,class:"bind-dialog"},{footer:o(()=>[l("div",Le,[t(r,{onClick:e[10]||(e[10]=a=>b.value=!1)},{default:o(()=>e[28]||(e[28]=[v("取消")])),_:1}),t(r,{type:"primary",onClick:X,loading:q.value,disabled:d.value==="wechat"},{default:o(()=>e[29]||(e[29]=[v(" 确认绑定 ")])),_:1},8,["loading","disabled"])])]),default:o(()=>[t($,{model:n,rules:G,ref_key:"bindFormRef",ref:y,"label-position":"top"},{default:o(()=>[d.value==="bank"?(u(),p(w,{key:0},[t(f,{label:"开户银行",prop:"bankName"},{default:o(()=>[t(te,{modelValue:n.bankName,"onUpdate:modelValue":e[5]||(e[5]=a=>n.bankName=a),placeholder:"请选择开户银行"},{default:o(()=>[(u(),p(w,null,D(Q,a=>t(ae,{key:a.code,label:a.name,value:a.code},{default:o(()=>[v(_(a.name),1)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"持卡人姓名",prop:"holderName"},{default:o(()=>[t(k,{modelValue:n.holderName,"onUpdate:modelValue":e[6]||(e[6]=a=>n.holderName=a),placeholder:"请输入持卡人姓名"},null,8,["modelValue"])]),_:1}),t(f,{label:"银行卡号",prop:"accountNumber"},{default:o(()=>[t(k,{modelValue:n.accountNumber,"onUpdate:modelValue":e[7]||(e[7]=a=>n.accountNumber=a),placeholder:"请输入银行卡号"},null,8,["modelValue"])]),_:1})],64)):I("",!0),d.value==="alipay"?(u(),p(w,{key:1},[t(f,{label:"支付宝账号",prop:"alipayAccount"},{default:o(()=>[t(k,{modelValue:n.alipayAccount,"onUpdate:modelValue":e[8]||(e[8]=a=>n.alipayAccount=a),placeholder:"请输入支付宝账号"},null,8,["modelValue"])]),_:1}),t(f,{label:"真实姓名",prop:"realName"},{default:o(()=>[t(k,{modelValue:n.realName,"onUpdate:modelValue":e[9]||(e[9]=a=>n.realName=a),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1})],64)):I("",!0),d.value==="wechat"?(u(),p("div",Ye,[t(le,{title:"请使用微信扫描下方二维码进行账号绑定",type:"info",closable:!1,center:""}),l("div",ze,[t(oe,{src:W,fit:"contain",class:"qrcode","preview-src-list":[W]},{error:o(()=>[l("div",He,[t(g,{size:40},{default:o(()=>[t(N(me))]),_:1}),e[27]||(e[27]=l("span",null,"二维码加载失败",-1))])]),_:1},8,["preview-src-list"])])])):I("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},je=se(Se,[["__scopeId","data-v-d45874f2"]]);export{je as default};
