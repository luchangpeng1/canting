import{_ as G,a0 as H,F as O,a1 as X,a2 as J,a3 as K,e as Q,a4 as Y,s as Z,i as $,L as ee,a5 as le,G as ne,a6 as ae,g as k,k as C,n as a,q as l,w as o,v as c,E as v,x as s,y as f,B as b,H as q,X as D,I as oe,z as y,A as te,C as se}from"./index-eMRJYRn7.js";const ie={name:"UserProfile",components:{WalletFilled:H,List:O,StarFilled:X,ChatDotSquare:J,EditPen:K,Message:Q,Bell:Y,Setting:Z,InfoFilled:$,Plus:ee,ArrowRight:le,ChatSquare:ne,Edit:ae},setup(){const I=se(),e=k({name:"张三",studentId:"2021001001",avatar:"",balance:99.5,points:280,favorites:12,feedbacks:3}),F=k(!1),n=k({amount:50}),w=k(!1),p=k({canteen:"",window:"",type:"",content:"",images:[]}),E=[{id:1,name:"中央食堂"},{id:2,name:"沁园餐厅"}],P=i=>[{id:1,name:"特色炒菜"},{id:2,name:"面食档口"}],d=()=>{F.value=!0},r=()=>{if(!n.value.amount||n.value.amount<=0){v.warning("请输入有效的充值金额");return}v.success(`成功充值 ${n.value.amount} 元`),e.value.balance+=n.value.amount,F.value=!1},U=()=>{w.value=!0},S=i=>{p.value.images.push(i)},_=()=>{if(!p.value.type){v.warning("请选择建议类型");return}if(!p.value.content||p.value.content.trim()===""){v.warning("请填写建议内容");return}v.success("感谢您的建议，我们会认真考虑"),w.value=!1,p.value={canteen:"",window:"",type:"",content:"",images:[]}},x=()=>{v({message:"校园食堂点餐系统 v1.0.0",type:"info"})},A=()=>{localStorage.removeItem("user"),v.success("已退出登录"),I.push("/login")},u=i=>{i.startsWith("/student/")||(i="/student"+i),I.push(i)},R=i=>{switch(i){case"transactions":u("/transactions");break;case"favorites":u("/favorites");break;case"reviews":u("/reviews");break;case"notification-settings":u("/notification-settings");break;case"preferences":u("/preferences");break;case"my-feedbacks":u("/my-feedbacks");break;default:console.warn(`未处理的菜单命令: ${i}`);break}},V=k(!1),m=k({avatar:"",name:"",phone:"",email:""});return{userInfo:e,rechargeVisible:F,rechargeForm:n,feedbackVisible:w,feedbackForm:p,canteens:E,showRecharge:d,handleRecharge:r,showFeedbackDialog:U,handleImageChange:S,submitFeedback:_,showAbout:x,handleLogout:A,getWindows:P,navigateToPage:u,handleMenuClick:R,profileEditVisible:V,profileForm:m,showEditProfile:()=>{m.value={avatar:e.value.avatar,name:e.value.name,phone:e.value.phone||"",email:e.value.email||""},V.value=!0},handleAvatarChange:i=>{m.value.avatar=URL.createObjectURL(i.raw)},updateProfile:()=>{e.value={...e.value,avatar:m.value.avatar,name:m.value.name,phone:m.value.phone,email:m.value.email},v.success("个人信息更新成功"),V.value=!1}}}},de={class:"user-profile"},re={class:"user-info-card"},ue={class:"user-info"},me={class:"info-content"},ce={class:"name-wrapper"},fe={class:"balance-info"},_e={class:"balance-item"},ve={class:"amount"},be={class:"balance-item"},pe={class:"amount"},ke={class:"menu-list"},ge={class:"menu-icon"},Ve={class:"menu-content"},Ce={class:"menu-value"},Fe={class:"menu-icon"},we={class:"menu-content"},he={class:"menu-icon"},ye={class:"menu-content"},Ie={class:"menu-value"},Ee={class:"menu-icon"},Pe={class:"menu-content"},Ue={class:"menu-icon"},Se={class:"menu-content"},xe={class:"menu-icon"},Ae={class:"menu-content"},Re={class:"menu-value"},Me={class:"menu-icon"},Le={class:"menu-content"},Be={class:"menu-icon"},qe={class:"menu-content"},De={class:"menu-icon"},We={class:"menu-content"},Ne={class:"logout-button"},ze={class:"recharge-options"},Te=["onClick"],je=["src"];function Ge(I,e,F,n,w,p){const E=s("el-avatar"),P=s("Edit"),d=s("el-icon"),r=s("el-button"),U=s("WalletFilled"),S=s("List"),_=s("ArrowRight"),x=s("StarFilled"),A=s("ChatDotSquare"),u=s("EditPen"),R=s("Message"),V=s("Bell"),m=s("Setting"),W=s("InfoFilled"),N=s("el-card"),z=s("el-input-number"),i=s("el-form-item"),M=s("el-form"),L=s("el-dialog"),g=s("el-option"),B=s("el-select"),h=s("el-input"),T=s("Plus"),j=s("el-upload");return f(),C("div",de,[a("div",re,[a("div",ue,[l(E,{size:64,src:n.userInfo.avatar},{default:o(()=>[b(c(n.userInfo.name.charAt(0)),1)]),_:1},8,["src"]),a("div",me,[a("div",ce,[a("h3",null,c(n.userInfo.name),1),l(r,{class:"edit-btn",type:"primary",link:"",onClick:n.showEditProfile,title:"编辑个人信息"},{default:o(()=>[l(d,null,{default:o(()=>[l(P)]),_:1}),e[23]||(e[23]=a("span",{class:"edit-text"},"编辑资料",-1))]),_:1},8,["onClick"])]),a("p",null,c(n.userInfo.studentId),1)])]),a("div",fe,[a("div",_e,[a("span",ve,"¥"+c(n.userInfo.balance),1),e[24]||(e[24]=a("span",{class:"label"},"余额",-1))]),a("div",be,[a("span",pe,c(n.userInfo.points),1),e[25]||(e[25]=a("span",{class:"label"},"积分",-1))])])]),a("div",ke,[l(N,{class:"menu-card"},{default:o(()=>[a("div",{class:"menu-item",onClick:e[0]||(e[0]=(...t)=>n.showRecharge&&n.showRecharge(...t))},[a("div",ge,[l(d,null,{default:o(()=>[l(U)]),_:1})]),a("div",Ve,[e[26]||(e[26]=a("span",null,"我的钱包",-1)),a("span",Ce,"¥"+c(n.userInfo.balance),1)])]),a("div",{class:"menu-item",onClick:e[1]||(e[1]=t=>n.navigateToPage("/transactions"))},[a("div",Fe,[l(d,null,{default:o(()=>[l(S)]),_:1})]),a("div",we,[e[27]||(e[27]=a("span",null,"消费记录",-1)),l(d,null,{default:o(()=>[l(_)]),_:1})])]),a("div",{class:"menu-item",onClick:e[2]||(e[2]=t=>n.handleMenuClick("favorites"))},[a("div",he,[l(d,null,{default:o(()=>[l(x)]),_:1})]),a("div",ye,[e[28]||(e[28]=a("span",null,"我的收藏",-1)),a("span",Ie,c(n.userInfo.favorites)+"个菜品",1)])]),a("div",{class:"menu-item",onClick:e[3]||(e[3]=t=>n.handleMenuClick("reviews"))},[a("div",Ee,[l(d,null,{default:o(()=>[l(A)]),_:1})]),a("div",Pe,[e[29]||(e[29]=a("span",null,"历史评价",-1)),l(d,null,{default:o(()=>[l(_)]),_:1})])]),a("div",{class:"menu-item",onClick:e[4]||(e[4]=(...t)=>n.showFeedbackDialog&&n.showFeedbackDialog(...t))},[a("div",Ue,[l(d,null,{default:o(()=>[l(u)]),_:1})]),a("div",Se,[e[30]||(e[30]=a("span",null,"提交建议",-1)),l(d,null,{default:o(()=>[l(_)]),_:1})])]),a("div",{class:"menu-item",onClick:e[5]||(e[5]=t=>n.handleMenuClick("my-feedbacks"))},[a("div",xe,[l(d,null,{default:o(()=>[l(R)]),_:1})]),a("div",Ae,[e[31]||(e[31]=a("span",null,"我的建议",-1)),a("span",Re,c(n.userInfo.feedbacks)+"条",1)])]),a("div",{class:"menu-item",onClick:e[6]||(e[6]=t=>n.handleMenuClick("notification-settings"))},[a("div",Me,[l(d,null,{default:o(()=>[l(V)]),_:1})]),a("div",Le,[e[32]||(e[32]=a("span",null,"通知设置",-1)),l(d,null,{default:o(()=>[l(_)]),_:1})])]),a("div",{class:"menu-item",onClick:e[7]||(e[7]=t=>n.handleMenuClick("preferences"))},[a("div",Be,[l(d,null,{default:o(()=>[l(m)]),_:1})]),a("div",qe,[e[33]||(e[33]=a("span",null,"偏好设置",-1)),l(d,null,{default:o(()=>[l(_)]),_:1})])]),a("div",{class:"menu-item",onClick:e[8]||(e[8]=(...t)=>n.showAbout&&n.showAbout(...t))},[a("div",De,[l(d,null,{default:o(()=>[l(W)]),_:1})]),a("div",We,[e[34]||(e[34]=a("span",null,"关于我们",-1)),l(d,null,{default:o(()=>[l(_)]),_:1})])])]),_:1}),a("div",Ne,[l(r,{type:"danger",plain:"",onClick:n.handleLogout},{default:o(()=>e[35]||(e[35]=[b("退出登录")])),_:1},8,["onClick"])])]),l(L,{modelValue:n.rechargeVisible,"onUpdate:modelValue":e[11]||(e[11]=t=>n.rechargeVisible=t),title:"余额充值",width:"90%"},{footer:o(()=>[l(r,{onClick:e[10]||(e[10]=t=>n.rechargeVisible=!1)},{default:o(()=>e[36]||(e[36]=[b("取消")])),_:1}),l(r,{type:"primary",onClick:n.handleRecharge},{default:o(()=>e[37]||(e[37]=[b("确认充值")])),_:1},8,["onClick"])]),default:o(()=>[a("div",ze,[(f(),C(q,null,D([20,50,100,200],t=>a("div",{key:t,class:oe(["recharge-option",{active:n.rechargeForm.amount===t}]),onClick:He=>n.rechargeForm.amount=t}," ¥"+c(t),11,Te)),64))]),l(M,{model:n.rechargeForm,"label-width":"80px"},{default:o(()=>[l(i,{label:"其他金额"},{default:o(()=>[l(z,{modelValue:n.rechargeForm.amount,"onUpdate:modelValue":e[9]||(e[9]=t=>n.rechargeForm.amount=t),min:0,step:10},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(L,{modelValue:n.feedbackVisible,"onUpdate:modelValue":e[17]||(e[17]=t=>n.feedbackVisible=t),title:"提交建议",width:"90%"},{footer:o(()=>[l(r,{onClick:e[16]||(e[16]=t=>n.feedbackVisible=!1)},{default:o(()=>e[38]||(e[38]=[b("取消")])),_:1}),l(r,{type:"primary",onClick:n.submitFeedback},{default:o(()=>e[39]||(e[39]=[b("提交建议")])),_:1},8,["onClick"])]),default:o(()=>[l(M,{model:n.feedbackForm,"label-width":"80px"},{default:o(()=>[l(i,{label:"食堂"},{default:o(()=>[l(B,{modelValue:n.feedbackForm.canteen,"onUpdate:modelValue":e[12]||(e[12]=t=>n.feedbackForm.canteen=t),placeholder:"请选择食堂"},{default:o(()=>[(f(!0),C(q,null,D(n.canteens,t=>(f(),y(g,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n.feedbackForm.canteen?(f(),y(i,{key:0,label:"窗口"},{default:o(()=>[l(B,{modelValue:n.feedbackForm.window,"onUpdate:modelValue":e[13]||(e[13]=t=>n.feedbackForm.window=t),placeholder:"请选择窗口"},{default:o(()=>[(f(!0),C(q,null,D(n.getWindows(n.feedbackForm.canteen),t=>(f(),y(g,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):te("",!0),l(i,{label:"建议类型"},{default:o(()=>[l(B,{modelValue:n.feedbackForm.type,"onUpdate:modelValue":e[14]||(e[14]=t=>n.feedbackForm.type=t),placeholder:"请选择建议类型"},{default:o(()=>[l(g,{label:"菜品建议",value:"dish"}),l(g,{label:"服务建议",value:"service"}),l(g,{label:"环境建议",value:"environment"}),l(g,{label:"其他建议",value:"other"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"建议内容"},{default:o(()=>[l(h,{modelValue:n.feedbackForm.content,"onUpdate:modelValue":e[15]||(e[15]=t=>n.feedbackForm.content=t),type:"textarea",rows:4,placeholder:"请详细描述您的建议..."},null,8,["modelValue"])]),_:1}),l(i,{label:"图片"},{default:o(()=>[l(j,{action:"#","list-type":"picture-card","auto-upload":!1,"on-change":n.handleImageChange},{default:o(()=>[l(d,null,{default:o(()=>[l(T)]),_:1})]),_:1},8,["on-change"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(L,{modelValue:n.profileEditVisible,"onUpdate:modelValue":e[22]||(e[22]=t=>n.profileEditVisible=t),title:"编辑个人信息",width:"90%"},{footer:o(()=>[l(r,{onClick:e[21]||(e[21]=t=>n.profileEditVisible=!1)},{default:o(()=>e[40]||(e[40]=[b("取消")])),_:1}),l(r,{type:"primary",onClick:n.updateProfile},{default:o(()=>e[41]||(e[41]=[b("保存")])),_:1},8,["onClick"])]),default:o(()=>[l(M,{model:n.profileForm,"label-width":"80px"},{default:o(()=>[l(i,{label:"头像"},{default:o(()=>[l(j,{class:"avatar-uploader",action:"#","show-file-list":!1,"auto-upload":!1,"on-change":n.handleAvatarChange},{default:o(()=>[n.profileForm.avatar?(f(),C("img",{key:0,src:n.profileForm.avatar,class:"avatar"},null,8,je)):(f(),y(d,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[l(T)]),_:1}))]),_:1},8,["on-change"])]),_:1}),l(i,{label:"姓名"},{default:o(()=>[l(h,{modelValue:n.profileForm.name,"onUpdate:modelValue":e[18]||(e[18]=t=>n.profileForm.name=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"手机号码"},{default:o(()=>[l(h,{modelValue:n.profileForm.phone,"onUpdate:modelValue":e[19]||(e[19]=t=>n.profileForm.phone=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"邮箱"},{default:o(()=>[l(h,{modelValue:n.profileForm.email,"onUpdate:modelValue":e[20]||(e[20]=t=>n.profileForm.email=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const Xe=G(ie,[["render",Ge],["__scopeId","data-v-884e8270"]]);export{Xe as default};
