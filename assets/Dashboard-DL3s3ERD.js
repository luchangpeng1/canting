import{_ as Q,g as p,o as W,j as Y,k as L,q as e,w as t,x as n,y as m,H as Z,X as I,z as C,n as l,ax as S,v as f,I as ee,B as r,aG as O,C as te,a6 as B}from"./index-1A1V_OG6.js";import{i as E}from"./index-CUeaqhHS.js";const ae={class:"dashboard-container"},oe={class:"stat-content"},le={class:"stat-info"},se={class:"stat-title"},ne={class:"stat-value"},re={class:"chart-header"},de={class:"chart-header"},ie={class:"card-header"},ue={class:"card-header"},pe={__name:"Dashboard",setup(ce){const v=te(),b=p(null),g=p(null);let d=null,i=null;const M=p([{title:"今日营业额",value:"¥8,846",trend:12.5,icon:"Money",color:"#409EFF"},{title:"今日订单数",value:"168",trend:8.2,icon:"ShoppingCart",color:"#67C23A"},{title:"今日客流量",value:"1,286",trend:-3.5,icon:"User",color:"#E6A23C"},{title:"菜品总数",value:"86",trend:4.8,icon:"Goods",color:"#F56C6C"}]),D=p("week"),z=p("today"),T=p([{orderNo:"DD20240320001",time:"2024-03-20 10:30:25",status:"待接单"},{orderNo:"DD20240320002",time:"2024-03-20 10:35:12",status:"待接单"},{orderNo:"DD20240320003",time:"2024-03-20 10:38:45",status:"制作中"},{orderNo:"DD20240320004",time:"2024-03-20 10:42:18",status:"待接单"}]),U=p([{name:"土豆",stock:5,threshold:10},{name:"胡萝卜",stock:8,threshold:15},{name:"青椒",stock:3,threshold:10},{name:"猪肉",stock:12,threshold:20}]),F=()=>{if(!b.value)return;d=E(b.value);const s={tooltip:{trigger:"axis"},legend:{data:["营业额","订单量"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:[{type:"value",name:"营业额",axisLabel:{formatter:"¥{value}"}},{type:"value",name:"订单量",axisLabel:{formatter:"{value}单"}}],series:[{name:"营业额",type:"line",smooth:!0,data:[5200,4800,6300,5800,7200,8500,7800]},{name:"订单量",type:"line",smooth:!0,yAxisIndex:1,data:[120,110,145,135,160,185,170]}]};d.setOption(s)},R=()=>{if(!g.value)return;i=E(g.value);const s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["红烧肉","鱼香肉丝","宫保鸡丁","麻婆豆腐","青椒肉丝"]},series:[{name:"销量",type:"bar",data:[58,45,42,38,35]}]};i.setOption(s)},A=()=>{d==null||d.resize(),i==null||i.resize()},q=s=>({待接单:"warning",制作中:"primary",待配送:"success",已完成:"info"})[s]||"info",G=s=>s<=5?"danger":s<=10?"warning":"success",$=s=>{v.push({path:"/admin/orders",query:{orderNo:s.orderNo}})},j=s=>{v.push({path:"/admin/inventory",query:{item:s.name}})},H=()=>{v.push("/admin/orders")},P=()=>{v.push("/admin/inventory")};return W(()=>{F(),R(),window.addEventListener("resize",A)}),Y(()=>{window.removeEventListener("resize",A),d==null||d.dispose(),i==null||i.dispose()}),(s,a)=>{const h=n("el-icon"),c=n("el-card"),_=n("el-col"),k=n("el-row"),w=n("el-radio-button"),X=n("el-radio-group"),x=n("el-option"),J=n("el-select"),y=n("el-button"),u=n("el-table-column"),N=n("el-tag"),V=n("el-table");return m(),L("div",ae,[e(k,{gutter:20,class:"dashboard-header"},{default:t(()=>[(m(!0),L(Z,null,I(M.value,o=>(m(),C(_,{span:6,key:o.title},{default:t(()=>[e(c,{shadow:"hover",class:"stat-card"},{default:t(()=>[l("div",oe,[e(h,{size:24,color:o.color},{default:t(()=>[(m(),C(S(o.icon)))]),_:2},1032,["color"]),l("div",le,[l("div",se,f(o.title),1),l("div",ne,f(o.value),1),l("div",{class:ee(["stat-trend",{up:o.trend>0,down:o.trend<0}])},[e(h,null,{default:t(()=>[(m(),C(S(o.trend>0?"ArrowUp":"ArrowDown")))]),_:2},1024),r(" "+f(Math.abs(o.trend))+"% ",1)],2)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(k,{gutter:20,class:"chart-row"},{default:t(()=>[e(_,{span:16},{default:t(()=>[e(c,{class:"chart-card"},{header:t(()=>[l("div",re,[a[5]||(a[5]=l("span",null,"营业趋势",-1)),e(X,{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=o=>D.value=o),size:"small"},{default:t(()=>[e(w,{label:"week"},{default:t(()=>a[2]||(a[2]=[r("本周")])),_:1}),e(w,{label:"month"},{default:t(()=>a[3]||(a[3]=[r("本月")])),_:1}),e(w,{label:"year"},{default:t(()=>a[4]||(a[4]=[r("全年")])),_:1})]),_:1},8,["modelValue"])])]),default:t(()=>[l("div",{ref_key:"salesChart",ref:b,class:"chart"},null,512)]),_:1})]),_:1}),e(_,{span:8},{default:t(()=>[e(c,{class:"chart-card"},{header:t(()=>[l("div",de,[a[6]||(a[6]=l("span",null,"菜品销量排行",-1)),e(J,{modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=o=>z.value=o),size:"small"},{default:t(()=>[e(x,{label:"今日",value:"today"}),e(x,{label:"本周",value:"week"}),e(x,{label:"本月",value:"month"})]),_:1},8,["modelValue"])])]),default:t(()=>[l("div",{ref_key:"dishRankChart",ref:g,class:"chart"},null,512)]),_:1})]),_:1})]),_:1}),e(k,{gutter:20,class:"data-row"},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(c,{class:"data-card"},{header:t(()=>[l("div",ie,[a[8]||(a[8]=l("span",null,"待处理订单",-1)),e(y,{type:"primary",link:"",onClick:H},{default:t(()=>[a[7]||(a[7]=r(" 查看更多")),e(h,null,{default:t(()=>[e(O(B))]),_:1})]),_:1})])]),default:t(()=>[e(V,{data:T.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(u,{prop:"orderNo",label:"订单号",width:"120"}),e(u,{prop:"time",label:"下单时间",width:"160"}),e(u,{prop:"status",label:"状态"},{default:t(({row:o})=>[e(N,{type:q(o.status)},{default:t(()=>[r(f(o.status),1)]),_:2},1032,["type"])]),_:1}),e(u,{fixed:"right",label:"操作",width:"120"},{default:t(({row:o})=>[e(y,{type:"primary",link:"",onClick:K=>$(o)},{default:t(()=>a[9]||(a[9]=[r(" 处理 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(c,{class:"data-card"},{header:t(()=>[l("div",ue,[a[11]||(a[11]=l("span",null,"库存预警",-1)),e(y,{type:"primary",link:"",onClick:P},{default:t(()=>[a[10]||(a[10]=r(" 查看更多")),e(h,null,{default:t(()=>[e(O(B))]),_:1})]),_:1})])]),default:t(()=>[e(V,{data:U.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(u,{prop:"name",label:"商品名称"}),e(u,{prop:"stock",label:"当前库存",width:"100"},{default:t(({row:o})=>[e(N,{type:G(o.stock),effect:"dark"},{default:t(()=>[r(f(o.stock),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"threshold",label:"预警阈值",width:"100"}),e(u,{fixed:"right",label:"操作",width:"120"},{default:t(({row:o})=>[e(y,{type:"primary",link:"",onClick:K=>j(o)},{default:t(()=>a[12]||(a[12]=[r(" 补货 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}}},fe=Q(pe,[["__scopeId","data-v-2726cfd2"]]);export{fe as default};
