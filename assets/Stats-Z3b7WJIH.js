import{i as V}from"./index-CUeaqhHS.js";import{_ as z,g as i,o as Y,j as b,k as w,n as s,q as r,I as B,a1 as O,w as l,x as d,y as u,z as y,v,J as $,aC as A,B as _}from"./index-CjeFGtzt.js";const F={class:"mobile-stats"},U={class:"page-header"},E={class:"stat-cards"},L={class:"stat-content"},N={class:"stat-info"},T={class:"stat-title"},j={class:"stat-value"},q={class:"chart-header"},J={__name:"Stats",setup(R){const m=i("week"),c=i(null);let a=null;const n=i(new Date().toISOString().split("T")[0]),p=i([]),D=t=>t>new Date,M=async t=>{t||(t=new Date().toISOString().split("T")[0]),await f(t)},f=async t=>{try{const e={revenue:Math.floor(Math.random()*1e4),orders:Math.floor(Math.random()*200),customers:Math.floor(Math.random()*1500),averageOrder:Math.floor(Math.random()*100)};p.value=[{title:`${t===n.value?"今日":""}营业额`,value:`¥${e.revenue.toFixed(2)}`,trend:12.5},{title:`${t===n.value?"今日":""}订单数`,value:e.orders.toString(),trend:8.2},{title:`${t===n.value?"今日":""}客流量`,value:e.customers.toString(),trend:-3.5},{title:"平均客单价",value:`¥${e.averageOrder.toFixed(2)}`,trend:5.8}]}catch(e){console.error("获取统计数据失败:",e)}},x=()=>{if(!c.value)return;a=V(c.value);const t={tooltip:{trigger:"axis"},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320],type:"line",smooth:!0}]};a.setOption(t)};return Y(async()=>{await f(n.value),x(),window.addEventListener("resize",()=>a==null?void 0:a.resize())}),b(()=>{a==null||a.dispose(),window.removeEventListener("resize",()=>a==null?void 0:a.resize())}),(t,e)=>{const k=d("el-date-picker"),C=d("el-icon"),h=d("el-card"),g=d("el-radio-button"),S=d("el-radio-group");return u(),w("div",F,[s("div",U,[e[2]||(e[2]=s("h2",null,"营业统计",-1)),r(k,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),type:"date",size:"small",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","disabled-date":D,onChange:M},null,8,["modelValue"])]),s("div",E,[(u(!0),w(B,null,O(p.value,o=>(u(),y(h,{key:o.title,class:"stat-card"},{default:l(()=>[s("div",L,[s("div",N,[s("div",T,v(o.title),1),s("div",j,v(o.value),1)]),s("div",{class:$(["stat-trend",{up:o.trend>0,down:o.trend<0}])},[r(C,null,{default:l(()=>[(u(),y(A(o.trend>0?"ArrowUp":"ArrowDown")))]),_:2},1024),_(" "+v(Math.abs(o.trend))+"% ",1)],2)])]),_:2},1024))),128))]),r(h,{class:"chart-card"},{header:l(()=>[s("div",q,[e[5]||(e[5]=s("span",null,"营业趋势",-1)),r(S,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),size:"small"},{default:l(()=>[r(g,{value:"week"},{default:l(()=>e[3]||(e[3]=[_("周")])),_:1}),r(g,{value:"month"},{default:l(()=>e[4]||(e[4]=[_("月")])),_:1})]),_:1},8,["modelValue"])])]),default:l(()=>[s("div",{ref_key:"trendChart",ref:c,class:"chart"},null,512)]),_:1})])}}},K=z(J,[["__scopeId","data-v-ef38bcc4"]]);export{K as default};
