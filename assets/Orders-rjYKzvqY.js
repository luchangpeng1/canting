import{_ as Je,g as v,Y as me,ax as T,ay as ee,o as We,k as p,q as s,w as l,n as t,z,A as g,v as i,E as y,af as j,x as m,y as c,B as _,aL as V,U as Ge,bd as Ke,aV as te,I as U,a1 as R,J as ae,$ as ve,a0 as _e,u as fe,i as he,be as ge}from"./index-CjeFGtzt.js";const Xe="/canting/assets/%E5%8F%AE%E5%92%9A-C5IQiY7P.mp3",Ze={class:"mobile-orders"},et={class:"filter-toolbar"},tt={key:3,class:"price-range"},at={class:"search-bar"},st={class:"pagination-container"},nt={class:"filter-content"},lt={key:0,class:"batch-toolbar"},ot={class:"selected-count"},dt={class:"batch-actions"},it={class:"stats-cards"},ct={class:"stat-card"},ut={class:"stat-value"},rt={class:"stat-card"},pt={class:"stat-value"},mt={class:"stat-card"},vt={class:"stat-value"},_t={class:"order-list"},ft={class:"date-header"},ht={class:"date-text"},gt={class:"order-count"},yt={class:"order-card-header"},kt={class:"order-basic-info"},bt={class:"order-info"},wt={class:"order-info-left"},xt={class:"order-no"},Mt={key:0,class:"order-meta"},Ct={class:"order-time"},Tt={class:"customer-info"},Vt={class:"order-no"},Dt={class:"order-items"},Yt={class:"items-header"},zt={class:"order-items-grid"},Nt={key:0,class:"item-image"},$t=["src","alt"],St={class:"item-content"},Bt={class:"item-info"},Ot={class:"item-name"},jt={key:0,class:"item-specs"},Ut={class:"item-price-info"},Et={class:"item-quantity"},qt={class:"item-price"},It={class:"order-footer"},Lt={class:"order-total"},At={class:"total-info"},Rt={class:"total-price"},Ft={key:0,class:"order-remark"},Pt={class:"order-actions"},Ht={class:"order-card-header"},Qt={class:"order-basic-info"},Jt={class:"order-info"},Wt={class:"order-info-left"},Gt={class:"order-no"},Kt={key:1,class:"order-no"},Xt={key:0,class:"order-meta"},Zt={class:"order-time"},ea={class:"customer-info"},ta={class:"student-id"},aa={class:"order-items"},sa={class:"items-header"},na={class:"order-items-grid"},la={key:0,class:"item-image"},oa=["src","alt"],da={class:"item-content"},ia={class:"item-info"},ca={class:"item-name"},ua={key:0,class:"item-specs"},ra={class:"item-price-info"},pa={class:"item-quantity"},ma={class:"item-price"},va={class:"order-footer"},_a={class:"order-total"},fa={class:"total-info"},ha={class:"total-price"},ga={key:0,class:"order-remark"},ya={class:"order-actions"},ka={key:1,class:"load-more"},ba={key:0},wa={key:1},xa={__name:"Orders",setup(Ma){const M=v("pending"),b=v([]),f=v([]),E=v(!1),q=v(!1),se=v(1),S=v(10),F=v(0),ne=v(""),K=v(!1),P=v({diningType:"",dateRange:[]}),H=v({orderCount:0,revenue:0,avgTime:0}),x=v(""),Y=v(""),D=v({min:null,max:null}),$=v([]),I=v(1),le=v(0),ye=[{text:"最近一周",value:()=>{const a=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*7),[e,a]}},{text:"最近一月",value:()=>{const a=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*30),[e,a]}},{text:"本月",value:()=>{const a=new Date;return[new Date(a.getFullYear(),a.getMonth(),1),a]}}];me(()=>!x.value||!Y.value&&x.value!=="total"?b.value:b.value.filter(a=>{switch(x.value){case"date":if(!$.value||!$.value.length)return!0;const e=T(a.createTime).format("YYYY-MM-DD"),u=$.value[0],o=$.value[1];return e>=u&&e<=o;case"orderNo":return a.orderNo.toLowerCase().includes(Y.value.toLowerCase());case"studentName":return a.studentName.includes(Y.value);case"diningType":return a.diningType===Y.value;case"total":const r=D.value.min??0,k=D.value.max??1/0;return a.total>=r&&a.total<=k;default:return!0}}));const oe=a=>a.reduce((e,u)=>e+u.quantity,0),ke=()=>{H.value={orderCount:47,revenue:1268,avgTime:15}},be=a=>["待处理","进行中"].includes(a.status),de=Array(20).fill(null).map((a,e)=>{const o=["待处理","进行中","已完成"][Math.floor(e/7)],r=o==="待处理"?Math.floor(Math.random()*30):o==="进行中"?Math.floor(Math.random()*120)+30:Math.floor(Math.random()*24*60)+150,k=[{name:"红烧肉",price:15},{name:"宫保鸡丁",price:16},{name:"鱼香肉丝",price:14},{name:"麻婆豆腐",price:12},{name:"青椒肉丝",price:13},{name:"回锅肉",price:15},{name:"水煮肉片",price:18},{name:"糖醋里脊",price:16}],N=["常规份量","加量","微辣","特辣"],A=Math.floor(Math.random()*2)+1,B=k.sort(()=>Math.random()-.5).slice(0,A).map((h,O)=>({id:e*10+O*2+1,name:h.name,quantity:Math.floor(Math.random()*2)+1,price:h.price,specs:N[Math.floor(Math.random()*N.length)]}));B.push({id:e*10+A*2,name:"米饭",quantity:Math.floor(Math.random()*2)+1,price:2,specs:Math.random()>.5?"常规份量":"大份"});const W=B.reduce((h,O)=>h+O.price*O.quantity,0),w=["不要辣","少放盐","打包带走","加饭","多放点青菜",""];return{id:String(e+1),orderNo:`DD${T().format("YYYYMMDD")}${String(e+1).padStart(3,"0")}`,status:o,createTime:T().subtract(r,"minute").valueOf(),studentName:["张三","李四","王五","赵六","钱七","孙八","周九","吴十"][Math.floor(Math.random()*8)],studentId:`2024${String(Math.floor(Math.random()*1e3)+1).padStart(4,"0")}`,diningType:Math.random()>.5?"堂食":"外带",items:B,total:W,isNew:o==="待处理"&&Math.random()>.7,remark:w[Math.floor(Math.random()*w.length)],expanded:!1}});de.sort((a,e)=>e.createTime-a.createTime);const Q=async(a=!1)=>{if(!E.value)try{E.value=!0,a&&(se.value=1,b.value=[],q.value=!1);const e={pending:"待处理",processing:"进行中",completed:"已完成"},u=de.filter(N=>N.status===e[M.value]),o=(I.value-1)*S.value,r=o+S.value,k=u.slice(o,r);b.value=k,le.value=u.length,q.value=r>=u.length}catch(e){console.error(e),y.error("获取订单列表失败")}finally{E.value=!1}},we=a=>{S.value=a,Q(!0)},xe=a=>{I.value=a,Q(!0)};ee(M,()=>{I.value=1,S.value=10,Q(!0)});const J=a=>T(a).format("HH:mm:ss"),ie=a=>({待处理:"warning",进行:"primary",已完成:"success",已取消:"info"})[a]||"info",Me=async a=>{try{await j.confirm("确定接受此订单吗？"),a.status="进行中",y.success("已接单")}catch{}},Ce=async a=>{try{const{value:e}=await j.prompt("请输入拒绝原因",{confirmButtonText:"确定",cancelButtonText:"取消"});e&&(a.status="已取消",y.success("已拒绝订单"))}catch{}},Te=async a=>{try{await j.confirm("确定完成此订单吗？"),a.status="已完成",y.success("订单已完成")}catch{}},Ve=async()=>{try{await j.confirm(`确定接受选中的 ${f.value.length} 个订单吗？`),b.value.forEach(a=>{f.value.includes(a.id)&&(a.status="进行中")}),f.value=[],y.success("批量接单成功")}catch{}},De=async()=>{try{await j.confirm(`确定完成选中的 ${f.value.length} 个订单吗？`),b.value.forEach(a=>{f.value.includes(a.id)&&(a.status="已完成")}),f.value=[],y.success("批量完成订单成功")}catch{}},Ye=()=>{setInterval(()=>{if(Math.random()>.3&&M.value==="pending"){const a={id:`new-${Date.now()}`,orderNo:`DD${T().format("YYYYMMDD")}${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,status:"待处理",createTime:Date.now(),items:[{id:1,name:"红烧肉",quantity:1,price:15},{id:2,name:"米饭",quantity:1,price:2}],total:17,isNew:!0};b.value.unshift(a),F.value++,new Audio(Xe).play()}},5e5)};We(()=>{Q(!0),Ye(),ke()}),ee(M,()=>{M.value==="pending"&&(F.value=0)});const ze=a=>{f.value=a},Ne=()=>{},$e=()=>{"vibrate"in navigator&&navigator.vibrate(50)},Se=async(a,e)=>{try{await updateOrderStatus(a.id,e),new Audio(statusChangeSound).play(),$e(),y.success("订单状态已更新")}catch{y.error("更新失败")}},ce=a=>{a.expanded||b.value.forEach(e=>{e.id!==a.id&&(e.expanded=!1)}),a.expanded=!a.expanded},Be=async a=>{if(!f.value.length){y.warning("请先选择订单");return}switch(a){case"print":await Oe();break;case"export":await je();break;case"delete":await Ue();break}},Oe=async()=>{try{const e=b.value.filter(o=>f.value.includes(o.id)).map(o=>`
      订单号：${o.orderNo}
      下单时间：${J(o.createTime)}
      客户信息：${o.studentName} (${o.studentId})
      菜品明细：
      ${o.items.map(r=>`${r.name} x${r.quantity} ¥${r.price}`).join(`
`)}
      总计：¥${o.total}
      ----------------------------------------
    `).join(`
`),u=window.open("","_blank");u.document.write(`
      <pre style="font-family: monospace; padding: 20px;">
        ${e}
      </pre>
    `),u.print(),u.close(),y.success("批量打印成功")}catch{y.error("批量打印失败")}},je=async()=>{try{const a=b.value.filter(r=>f.value.includes(r.id)),e=[["订单号","下单时间","客户姓名","学号","订单状态","用餐方式","总金额"].join(","),...a.map(r=>[r.orderNo,J(r.createTime),r.studentName,r.studentId,r.status,r.diningType,r.total].join(","))].join(`
`),u=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(u),o.download=`订单导出_${T().format("YYYYMMDD_HHmmss")}.csv`,o.click(),y.success("导出成功")}catch{y.error("导出失败")}},Ue=async()=>{try{await j.confirm(`确定要删除选中的 ${f.value.length} 个订单吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),b.value=b.value.filter(a=>!f.value.includes(a.id)),f.value=[],y.success("批量删除成功")}catch(a){a!=="cancel"&&y.error("批量删除失败")}},Ee=me(()=>{if(M.value!=="completed")return[];const a=b.value.reduce((e,u)=>{const o=T(u.createTime).format("YYYY-MM-DD");return e[o]||(e[o]=[]),e[o].push(u),e},{});return Object.entries(a).map(([e,u])=>({date:qe(e),orders:u.sort((o,r)=>r.createTime-o.createTime)})).sort((e,u)=>{const o=T(e.date,"YYYY年MM月DD日");return T(u.date,"YYYY年MM月DD日").diff(o)})}),qe=a=>{const e=T(a),u=T().startOf("day"),o=u.subtract(1,"day");return e.isSame(u,"day")?"今天":e.isSame(o,"day")?"昨天":e.format("YYYY年MM月DD日")},L=()=>{if(x.value==="total"&&D.value.max&&D.value.min>D.value.max){y.warning("最小金额不能大于最大金额");return}se.value=1,q.value=!1},Ie=()=>{x.value="",Y.value="",D.value={min:null,max:null},$.value=[]};ee(M,()=>{Ie()});const ue=a=>({红烧肉:"https://img.zcool.cn/community/01a9445d54c65da801211d53235317.jpg",宫保鸡丁:"https://img.zcool.cn/community/01f8c65d54c65da801211d532386f7.jpg",鱼香肉丝:"https://img.zcool.cn/community/0120465d54c65da801211d532343b4.jpg",麻婆豆腐:"https://img.zcool.cn/community/01c3c25d54c65da801211d5323cf41.jpg",青椒肉丝:"https://img.zcool.cn/community/01d9d95d54c65da801211d532358f4.jpg",回锅肉:"https://img.zcool.cn/community/01d2fd5d54c65da801211d53236875.jpg",水煮肉片:"https://img.zcool.cn/community/01b5fd5d54c65da801211d53234c67.jpg",糖醋里脊:"https://img.zcool.cn/community/01f9d65d54c65da801211d53237dc3.jpg"})[a]||"https://img.zcool.cn/community/01311f5d54c65da801211d53231984.jpg";return(a,e)=>{const u=m("el-badge"),o=m("el-tab-pane"),r=m("el-tabs"),k=m("el-option"),N=m("el-select"),A=m("el-date-picker"),B=m("el-input"),W=m("el-input-number"),w=m("el-icon"),h=m("el-button"),O=m("el-pagination"),re=m("el-form-item"),Le=m("el-form"),Ae=m("el-drawer"),X=m("el-dropdown-item"),Re=m("el-dropdown-menu"),Fe=m("el-dropdown"),Z=m("el-col"),Pe=m("el-row"),G=m("el-tag"),pe=m("el-card"),He=m("el-checkbox"),Qe=m("el-checkbox-group");return c(),p("div",Ze,[s(r,{modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=n=>M.value=n),onTabChange:Se},{default:l(()=>[s(o,{label:"待处理",name:"pending"},{default:l(()=>[s(u,{value:F.value,hidden:!F.value},{default:l(()=>e[15]||(e[15]=[_(" 待处理 ")])),_:1},8,["value","hidden"])]),_:1}),s(o,{label:"进行中",name:"processing"}),s(o,{label:"已完成",name:"completed"})]),_:1},8,["modelValue"]),t("div",et,[s(N,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=n=>x.value=n),placeholder:"筛选条件",size:"small",style:{width:"120px"}},{default:l(()=>[s(k,{label:"订单号",value:"orderNo"}),s(k,{label:"学生姓名",value:"studentName"}),s(k,{label:"用餐方式",value:"diningType"}),s(k,{label:"订单金额",value:"total"}),s(k,{label:"下单日期",value:"date"})]),_:1},8,["modelValue"]),x.value==="date"?(c(),z(A,{key:0,modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=n=>$.value=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small",onChange:L,style:{width:"260px"},"value-format":"YYYY-MM-DD",shortcuts:ye},null,8,["modelValue"])):x.value==="orderNo"||x.value==="studentName"?(c(),z(B,{key:1,modelValue:Y.value,"onUpdate:modelValue":e[3]||(e[3]=n=>Y.value=n),placeholder:`请输入${x.value==="orderNo"?"订单号":"学生姓名"}`,size:"small",clearable:"",onInput:L,style:{width:"200px"}},null,8,["modelValue","placeholder"])):x.value==="diningType"?(c(),z(N,{key:2,modelValue:Y.value,"onUpdate:modelValue":e[4]||(e[4]=n=>Y.value=n),placeholder:"选择用餐方式",size:"small",clearable:"",onChange:L,style:{width:"200px"}},{default:l(()=>[s(k,{label:"堂食",value:"堂食"}),s(k,{label:"外带",value:"外带"})]),_:1},8,["modelValue"])):x.value==="total"?(c(),p("div",tt,[s(W,{modelValue:D.value.min,"onUpdate:modelValue":e[5]||(e[5]=n=>D.value.min=n),min:0,size:"small",placeholder:"最小金额",onChange:L},null,8,["modelValue"]),e[16]||(e[16]=t("span",null,"-",-1)),s(W,{modelValue:D.value.max,"onUpdate:modelValue":e[6]||(e[6]=n=>D.value.max=n),min:0,size:"small",placeholder:"最大金额",onChange:L},null,8,["modelValue"])])):g("",!0)]),t("div",at,[s(B,{modelValue:ne.value,"onUpdate:modelValue":e[7]||(e[7]=n=>ne.value=n),placeholder:"搜索订单号/学生姓名",clearable:"",onInput:Ne},{prefix:l(()=>[s(w,null,{default:l(()=>[s(V(Ge))]),_:1})]),_:1},8,["modelValue"]),s(h,{onClick:e[8]||(e[8]=n=>K.value=!0)},{default:l(()=>[s(w,null,{default:l(()=>[s(V(Ke))]),_:1})]),_:1})]),t("div",st,[s(O,{"current-page":I.value,"onUpdate:currentPage":e[9]||(e[9]=n=>I.value=n),"page-size":S.value,"onUpdate:pageSize":e[10]||(e[10]=n=>S.value=n),"page-sizes":[10,20,30,50],total:le.value,layout:"total, sizes, prev, pager, next",onSizeChange:we,onCurrentChange:xe},null,8,["current-page","page-size","total"])]),s(Ae,{modelValue:K.value,"onUpdate:modelValue":e[13]||(e[13]=n=>K.value=n),title:"筛选条件",direction:"rtl",size:"80%"},{default:l(()=>[t("div",nt,[s(Le,null,{default:l(()=>[s(re,{label:"用餐方式"},{default:l(()=>[s(N,{modelValue:P.value.diningType,"onUpdate:modelValue":e[11]||(e[11]=n=>P.value.diningType=n),clearable:""},{default:l(()=>[s(k,{label:"堂食",value:"堂食"}),s(k,{label:"外带",value:"外带"})]),_:1},8,["modelValue"])]),_:1}),s(re,{label:"下单时间"},{default:l(()=>[s(A,{modelValue:P.value.dateRange,"onUpdate:modelValue":e[12]||(e[12]=n=>P.value.dateRange=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),f.value.length>0?(c(),p("div",lt,[t("span",ot,"已选择 "+i(f.value.length)+" 个订单",1),t("div",dt,[s(Fe,{onCommand:Be},{dropdown:l(()=>[s(Re,null,{default:l(()=>[s(X,{command:"print"},{default:l(()=>e[18]||(e[18]=[_("批量打印")])),_:1}),s(X,{command:"export"},{default:l(()=>e[19]||(e[19]=[_("导出订单")])),_:1}),s(X,{command:"delete",divided:"",style:{color:"#F56C6C"}},{default:l(()=>e[20]||(e[20]=[_(" 批量删除 ")])),_:1})]),_:1})]),default:l(()=>[s(h,{type:"primary",size:"small"},{default:l(()=>[e[17]||(e[17]=_(" 批量处理 ")),s(w,{class:"el-icon--right"},{default:l(()=>[s(V(te))]),_:1})]),_:1})]),_:1}),M.value==="pending"?(c(),z(h,{key:0,type:"primary",size:"small",onClick:Ve},{default:l(()=>e[21]||(e[21]=[_(" 批量接单 ")])),_:1})):g("",!0),M.value==="processing"?(c(),z(h,{key:1,type:"success",size:"small",onClick:De},{default:l(()=>e[22]||(e[22]=[_(" 批量完成 ")])),_:1})):g("",!0)])])):g("",!0),t("div",it,[s(Pe,{gutter:10},{default:l(()=>[s(Z,{span:8},{default:l(()=>[t("div",ct,[t("div",ut,i(H.value.orderCount),1),e[23]||(e[23]=t("div",{class:"stat-label"},"今日订单",-1))])]),_:1}),s(Z,{span:8},{default:l(()=>[t("div",rt,[t("div",pt,"¥"+i(H.value.revenue),1),e[24]||(e[24]=t("div",{class:"stat-label"},"营业额",-1))])]),_:1}),s(Z,{span:8},{default:l(()=>[t("div",mt,[t("div",vt,i(H.value.avgTime)+"分钟",1),e[25]||(e[25]=t("div",{class:"stat-label"},"平均处理",-1))])]),_:1})]),_:1})]),t("div",_t,[s(Qe,{modelValue:f.value,"onUpdate:modelValue":e[14]||(e[14]=n=>f.value=n),onChange:ze},{default:l(()=>[M.value==="completed"?(c(!0),p(U,{key:0},R(Ee.value,n=>(c(),p("div",{key:n.date,class:"order-group"},[t("div",ft,[t("span",ht,i(n.date),1),t("span",gt,i(n.orders.length)+"个订单",1)]),(c(!0),p(U,null,R(n.orders,d=>(c(),z(pe,{key:d.id,class:"order-card"},{default:l(()=>[t("div",yt,[t("div",kt,[t("div",bt,[t("div",wt,[t("span",xt,"订单号："+i(d.orderNo),1)]),s(G,{type:ie(d.status)},{default:l(()=>[_(i(d.status),1)]),_:2},1032,["type"])]),d.expanded?(c(),p("div",Mt,[t("span",Ct,i(J(d.createTime)),1),s(G,{size:"small",type:d.diningType==="堂食"?"success":"warning",class:"dining-type"},{default:l(()=>[_(i(d.diningType),1)]),_:2},1032,["type"])])):g("",!0)]),s(h,{text:"",class:"expand-btn",onClick:C=>ce(d)},{default:l(()=>[_(i(d.expanded?"收起":"展开")+" ",1),s(w,{class:ae(["expand-icon",{"is-expanded":d.expanded}])},{default:l(()=>[s(V(te))]),_:2},1032,["class"])]),_:2},1032,["onClick"])]),ve(t("div",null,[t("div",Tt,[s(w,null,{default:l(()=>[s(V(fe))]),_:1}),t("span",null,i(d.studentName),1),t("span",Vt,"订单号："+i(d.orderNo),1)]),t("div",Dt,[t("div",Yt,[e[26]||(e[26]=t("span",null,"菜品明细",-1)),t("span",null,"共"+i(oe(d.items))+"份",1)]),t("div",zt,[(c(!0),p(U,null,R(d.items,C=>(c(),p("div",{key:C.id,class:"order-item"},[C.name!=="米饭"?(c(),p("div",Nt,[t("img",{src:ue(C.name),alt:C.name},null,8,$t)])):g("",!0),t("div",St,[t("div",Bt,[t("span",Ot,i(C.name),1)]),C.specs?(c(),p("div",jt,i(C.specs),1)):g("",!0),t("div",Ut,[t("span",Et,"x"+i(C.quantity),1),t("span",qt,"¥"+i(C.price),1)])])]))),128))])]),t("div",It,[t("div",Lt,[t("div",At,[e[27]||(e[27]=t("span",{class:"total-label"},"总计：",-1)),t("span",Rt,"¥"+i(d.total),1)]),d.remark?(c(),p("div",Ft,[s(w,null,{default:l(()=>[s(V(he))]),_:1}),t("span",null,i(d.remark),1)])):g("",!0)]),t("div",Pt,[s(h,{type:"primary",size:"small",onClick:C=>a.handlePrint(d),class:"print-btn"},{default:l(()=>[s(w,null,{default:l(()=>[s(V(ge))]),_:1}),e[28]||(e[28]=_(" 打印 "))]),_:2},1032,["onClick"])])])],512),[[_e,d.expanded]])]),_:2},1024))),128))]))),128)):(c(!0),p(U,{key:1},R(b.value,n=>(c(),z(pe,{key:n.id,class:ae(["order-card",{"new-order":n.isNew}])},{default:l(()=>[t("div",Ht,[t("div",Qt,[t("div",Jt,[t("div",Wt,[be(n)?(c(),z(He,{key:0,value:n.id},{default:l(()=>[t("span",Gt,"订单号："+i(n.orderNo),1)]),_:2},1032,["value"])):(c(),p("span",Kt,"订单号："+i(n.orderNo),1))]),s(G,{type:ie(n.status)},{default:l(()=>[_(i(n.status),1)]),_:2},1032,["type"])]),n.expanded?(c(),p("div",Xt,[t("span",Zt,i(J(n.createTime)),1),s(G,{size:"small",type:n.diningType==="堂食"?"success":"warning",class:"dining-type"},{default:l(()=>[_(i(n.diningType),1)]),_:2},1032,["type"])])):g("",!0)]),s(h,{text:"",class:"expand-btn",onClick:d=>ce(n)},{default:l(()=>[_(i(n.expanded?"收起":"展开")+" ",1),s(w,{class:ae(["expand-icon",{"is-expanded":n.expanded}])},{default:l(()=>[s(V(te))]),_:2},1032,["class"])]),_:2},1032,["onClick"])]),ve(t("div",null,[t("div",ea,[s(w,null,{default:l(()=>[s(V(fe))]),_:1}),t("span",null,i(n.studentName),1),t("span",ta,"("+i(n.studentId)+")",1)]),t("div",aa,[t("div",sa,[e[29]||(e[29]=t("span",null,"菜品明细",-1)),t("span",null,"共"+i(oe(n.items))+"份",1)]),t("div",na,[(c(!0),p(U,null,R(n.items,d=>(c(),p("div",{key:d.id,class:"order-item"},[d.name!=="米饭"?(c(),p("div",la,[t("img",{src:ue(d.name),alt:d.name},null,8,oa)])):g("",!0),t("div",da,[t("div",ia,[t("span",ca,i(d.name),1)]),d.specs?(c(),p("div",ua,i(d.specs),1)):g("",!0),t("div",ra,[t("span",pa,"x"+i(d.quantity),1),t("span",ma,"¥"+i(d.price),1)])])]))),128))])]),t("div",va,[t("div",_a,[t("div",fa,[e[30]||(e[30]=t("span",{class:"total-label"},"总计：",-1)),t("span",ha,"¥"+i(n.total),1)]),n.remark?(c(),p("div",ga,[s(w,null,{default:l(()=>[s(V(he))]),_:1}),t("span",null,i(n.remark),1)])):g("",!0)]),t("div",ya,[n.status==="待处理"?(c(),p(U,{key:0},[s(h,{type:"primary",size:"small",onClick:d=>Me(n)},{default:l(()=>e[31]||(e[31]=[_(" 接单 ")])),_:2},1032,["onClick"]),s(h,{type:"danger",size:"small",onClick:d=>Ce(n)},{default:l(()=>e[32]||(e[32]=[_(" 拒绝 ")])),_:2},1032,["onClick"])],64)):n.status==="进行中"?(c(),z(h,{key:1,type:"success",size:"small",onClick:d=>Te(n)},{default:l(()=>e[33]||(e[33]=[_(" 完成 ")])),_:2},1032,["onClick"])):g("",!0),s(h,{type:"primary",size:"small",onClick:d=>a.handlePrint(n),class:"print-btn"},{default:l(()=>[s(w,null,{default:l(()=>[s(V(ge))]),_:1}),e[34]||(e[34]=_(" 打印 "))]),_:2},1032,["onClick"])])])],512),[[_e,n.expanded]])]),_:2},1032,["class"]))),128))]),_:1},8,["modelValue"])]),E.value||q.value?(c(),p("div",ka,[E.value?(c(),p("p",ba,"加载中...")):g("",!0),q.value?(c(),p("p",wa,"没有更多订单了")):g("",!0)])):g("",!0)])}}},Ta=Je(xa,[["__scopeId","data-v-593de64c"]]);export{Ta as default};
