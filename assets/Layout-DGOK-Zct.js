import{_ as R,g as m,o as U,j,ba as q,bb as F,k as w,n as t,v as l,q as e,w as a,I as J,a1 as K,af as g,E as y,x as s,y as i,B as C,aL as b,aZ as P,s as W,T as X,z as p,J as Z,aC as x,A as G,C as Q,K as Y,am as ee,bc as te,aX as ne,aB as ae}from"./index-CjeFGtzt.js";const oe={class:"mobile-admin-layout"},se={class:"header"},ce={class:"window-info"},le={class:"location-info"},ie={class:"canteen-name"},de={class:"floor-info"},re={class:"window-detail"},ue={class:"window-name"},_e={class:"operation-time"},me={class:"actions"},pe={class:"page-content"},fe={class:"tabbar"},ve=["onClick"],he={__name:"Layout",setup(we){const f=Q(),k=Y(),c=m({name:"大荤窗口",status:"open",canteen:{id:1,name:"中央食堂"},floor:1,operatingHours:"10:30-13:30, 16:30-19:00",type:"大荤窗口"}),r=m(c.value.status==="open"),v=m(0),B=[{name:"订单管理",path:"/m/admin/orders",icon:ee},{name:"菜单管理",path:"/m/admin/menu",icon:te},{name:"营业统计",path:"/m/admin/stats",icon:ne},{name:"提现管理",path:"/m/admin/withdraw",icon:ae}],I=n=>k.path===n,T=n=>{f.push(n)},V=async n=>{try{await g.confirm(`确定要${n?"开始营业":"打烊"}吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:n?"success":"warning"}),c.value.status=n?"open":"closed",y.success(`已${n?"开始营业":"打烊"}`)}catch{r.value=!n}},S=async()=>{},h=async()=>{};let u=null;U(()=>{S(),h(),u=setInterval(h,3e4)}),j(()=>{u&&clearInterval(u)});const z=async n=>{if(n==="logout")try{await g.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),localStorage.removeItem("token"),localStorage.removeItem("user"),f.push("/login"),y.success("已退出登录")}catch{}};return q(()=>{}),F(()=>{}),(n,d)=>{const E=s("el-divider"),L=s("el-tag"),_=s("el-icon"),N=s("el-button"),A=s("el-dropdown-item"),D=s("el-dropdown-menu"),M=s("el-dropdown"),$=s("el-switch"),H=s("router-view"),O=s("el-badge");return i(),w("div",oe,[t("div",se,[t("div",ce,[t("div",le,[t("span",ie,l(c.value.canteen.name),1),e(E,{direction:"vertical"}),t("span",de,l(c.value.floor)+"层",1)]),t("div",re,[t("span",ue,l(c.value.name),1),t("span",_e,l(c.value.operatingHours),1)]),e(L,{size:"small",type:c.value.status==="open"?"success":"danger"},{default:a(()=>[C(l(c.value.status==="open"?"营业中":"已打烊"),1)]),_:1},8,["type"])]),t("div",me,[e(M,{onCommand:z,trigger:"click"},{dropdown:a(()=>[e(D,null,{default:a(()=>[e(A,{command:"logout"},{default:a(()=>[e(_,null,{default:a(()=>[e(b(P))]),_:1}),d[1]||(d[1]=C("退出登录 "))]),_:1})]),_:1})]),default:a(()=>[e(N,{size:"small",type:"primary",plain:""},{default:a(()=>[e(_,null,{default:a(()=>[e(b(W))]),_:1})]),_:1})]),_:1}),e($,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=o=>r.value=o),"active-text":"营业","inactive-text":"打烊",onChange:V},null,8,["modelValue"])])]),t("div",pe,[e(H,null,{default:a(({Component:o})=>[e(X,{name:"fade",mode:"out-in"},{default:a(()=>[(i(),p(x(o)))]),_:2},1024)]),_:1})]),t("div",fe,[(i(),w(J,null,K(B,o=>t("div",{key:o.path,class:Z(["tab-item",{active:I(o.path)}]),onClick:ge=>T(o.path)},[e(_,null,{default:a(()=>[(i(),p(x(o.icon)))]),_:2},1024),t("span",null,l(o.name),1),o.path==="/m/admin/orders"&&v.value>0?(i(),p(O,{key:0,value:v.value,class:"order-badge"},null,8,["value"])):G("",!0)],10,ve)),64))])])}}},Ce=R(he,[["__scopeId","data-v-6ba4be22"]]);export{Ce as default};
